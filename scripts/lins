#!/bin/bash

if [ $# -eq 0 ]; then
  if [ $(ls | grep pkg.tar.xz) ]; then
    echo "Installing:"
    echo $(ls | grep pkg.tar.xz)
    sudo pacman -U *.pkg.tar.xz
    if [ $? -eq 0 ]; then
      cp *.pkg.tar.xz ~/.build/pkgcache/
    fi
  else
    echo "No valid packages found!"
  fi
else
  for TARGET in $@
  do
    if [ -f $TARGET ] && [ $(echo $TARGET | grep pkg.tar.xz) ]; then
      sudo pacman -U $TARGET
      if [ $? -eq 0 ]; then
        cp $TARGET ~/.build/pkgcache/
      fi
    else
      echo "$TARGET is not a valid package!"
    fi
  done
fi
